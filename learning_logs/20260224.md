# Resttful api 명세서 작성

- Resttful api 를 이용하는 개발자가 그 기능과 작동을 이해할 수 있도록 적절히 문서화가 되어야한다. 
그리고 그 문서에는 이용할수있는 앤드포인트,허용되는 데이터형식, api와 상호작용하는 방법이포함되어야함

- 앤드포인트 자동생성떄문에 우리가파악하지못한 부분들이있을수 있어 api명세서는 중요하다.

# spring boot 의 swagger / open api
1. swagger / open api
- open api 
공개되어잇는 api사용법을 명세하는방식
Restful API 를 설계구축
- Swagger : api구조를 시각적으로 확인하고 직접테스트할수있도록돕는 툴

- 목적: 백 프론트간 협업시 별도의문서 작성없이 실시간으로 업데이트되는 api명세서를 제공

2. api (애플리케이션 프로그래밍 인터페이스)
_인터페이스 서로다른것끼리 서로 상호작용할수잇게하는모든것_ 

_서로 다른소프트웨어가대화할수 잇게해주는 규칙이나매개체_

비유) 손님: (client) - 주문하는사람 (앱or웹사이트)
      주방: (server) - db 요리하는곳 
      점원: (api)- 주문을 주방에전달 주방에서 만든 음식을 다시손님에게가져다줌

- 손님은 주방안에서 어떤 일이 일어나는지 알 필요가없다는 점, 점원에게 정해진규칙대로말하기만하면 원하는결과를얻음      

## api 핵심역할
1. 전달자 : 요청을 받고 응답 - req / resp로 작성함
2. 보안관문 : 아무데이터나 가져가지못하게 인증된 사용만 접근허용 (api key)
3. 표준화 : 서로 다른 언어로 만들어진 프로그램들이 같은 규칙으로 소통하게끔함.


- controller클래스가 api의 입구가된다. 즉 controller 클래스는 요청이왓을때 맨 처음처리하는 관문.

# 프로젝트설정
1. springboot 3.xx 버전에는 'jakatrta'로 써야함

```java
//오픈api
	implementation'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.8.15'
```

-
-
2. application.properties

```java
# swagger
springdoc.swagger-ui.path=/swagger-ui.html
# open api doc path
springdoc.api-docs.path=/api.docs
# integrated 
springdoc.show-data-rest=true
```
http://localhost:8080/swagger-ui/index.html
3. api문서 상세설정
![alt text](image-5.png)

```JAVA
package korit_12.cardatabase00.config;


import io.swagger.v3.oas.models.OpenAPI;
import io.swagger.v3.oas.models.info.Info;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class OpenApiConfig {
    //BEAN? 
    @Bean
    public OpenAPI cardatabaseOpenAPI(){
            return new OpenAPI()
                    .info(new Info()
                            .title("Car Database API")
                            .description("자동차 소유쥬 관리를 위한 REST API 명세서 ")
                            .version("1.0.0")

                    );
    }//CALL3
}

```
메서드에 다는것임 BEAN

- '@Bean' : 메서드 레벨의 에너테이션으로 ,spring 컨테이너에 의해 관리되는 객체인 빈을 정의하고 등록하는 역할을한다.

@Bean정의
객체등록 : 해당 메서드가 반환하는 객체를 spring 의 
ioc컨테이너가 관리하는 빈으로등록.

***ioc*** 제어의역전

설정소스: 보통 '@configration'에너테이션이 붙은 클래스내에서 사용되며 이 클래스는 빈 정의를 제공하는 소스역할을 한다.

수동등록: 개발자가 직접 젝어할수 없는 외부 라이브러리객체를 생성하거나 복잡한 초기화 로직이생김 


```JAVA
package korit_12.cardatabase00.config;


import io.swagger.v3.oas.models.OpenAPI;
import io.swagger.v3.oas.models.info.Info;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration // 빈 정의를 제공하는 소스클래스라는 것을 명시

public class OpenApiConfig {
    //BEAN? 
    @Bean //메서들 리턴객체를 spring빈으로 등록하는 에너테이션

    public OpenAPI cardatabaseOpenAPI(){
            //직접 openapi객체를 생성하고 커스터마이징한다.
            return new OpenAPI()
                    .info(new Info()
                            .title("Car Database API")
                            .description("자동차 소유쥬 관리를 위한 REST API 명세서 ")
                            .version("1.0.0")

                    );
    }//CALL3
}

```
- 실제 동작 관련 추가
  1. 설정 소스 인식 : springboot 애플리케이션이 실행될때 '@Configuration'에 붙은 클래스를 스캔하여
  빈 정의 소스로 인식
  2. 메서드 실행 및 등록 : 클래스 내부에서 '@Bean'이 붙은 cardatabaseAPI() 메소드를 spring이 직접호출
  3. 빈 관리:

  4. 유지보수성 향상:


  # IOC와 Bean
Spring 프레임워크 상에서 빈은 **스프링의 ioc컨테이너가 생성하고 관리하는 자바 객체를**의미

단순히 "new" 키워드를 이용하여 직접 생성하는 일반적인 java 객체와는 달리 빈은 스프링컨테이너에 의해 생명주기(생성, 초기화,소멸)가 관리된다.

1. 빈의 핵심역할: 의존성 주입
- 빈은 'ApplicationContext'라는 컨테이너를 통해 빈을 관리하며 객체 간의 의존성을 자동으로 연결해준다.
(field, setter, 생성자)

- 코드간의 결합도를 낮추고 유연성을 높일수있다.

- CardatabaseApplication 클래스에서 직접 CarRepository객체를 생성하지않고 필드선언을 통해서 스프링이 관리하는 빈을 주입받아 사용햇다.

  - CarRepository carRepository, OwnerRepository ownerRepository(); 를 저희가 호출한 적이 없다는 점에서 spring컨테이너에서 알아서 객체 생성해서 필드주입을 했다.


 2. 빈 등록 방법
  - '@Bean' 을 수동으로 등록하는 방법 중 하나이고 위의 예시를 생각했을 때는 컴포넌트 스캔을 통해서 자주이루어진다.
  - 컴포넌트 스캔이란 특정 에너테이션이 붙은 클래스를 자동으로 검색하여 빈으로 등록하는 것.,
  - OwnerRepository에 에너테이션이없는데? 
  extend JpaRepository가 있으므로가능
  @Componet : 일반적인 컴포넌트 빈
  @Service:
  @RePosiory:
  @Contoroller/@RestController : 
- 

3. 빈의 특징
- 관리 주체:
- 싱글톤 원칙:
- 명명규칙:

# 백앤드 보호






